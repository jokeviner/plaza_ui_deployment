(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[98],{97591:function(gt,me,g){"use strict";g.r(me),g.d(me,{default:function(){return mt}});var yt=g(77576),je=g(12028),St=g(17462),Re=g(76772),j=g(2824),y=g(90636),B=g(3182),De=g(21349),w=g(54433),ve=g(70719),Tt=g(74379),O=g(38648),bt=g(18446),Q=g(90860),A=g(48773),Ce=g(952),we=g(64317),he=g(56139),Ae=g(30381),G=g.n(Ae),Ke=g(81354),N=g.n(Ke),I=g(11238);function W(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,t=e.getMonth()+1,a=e.getFullYear(),n=3,r=31;t<=3?(n=3,r=31):t<=6?(n=6,r=30):t<=9?(n=9,r=30):(n=12,r=31);for(var s=new Date(a,n-1,r);s.getDay()!=5;)r-=1,s.setDate(r);return s.getMonth()==t-1&&s.getDate()<=e.getDate()?(s.setDate(32),W(s)):s}function Oe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,t=e.getMonth()+1,a=e.getFullYear();return t+3>12?(t=1,a+=1):t+=3,W(new Date(a,t-1,1))}var ge=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];console.log(a)};function Ie(){return J.apply(this,arguments)}function J(){return J=(0,B.Z)((0,y.Z)().mark(function e(){var t;return(0,y.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.SPOT+"/api/v3/ticker/price?symbol=BTCUSDT").then(function(r){return r.price});case 2:return t=n.sent,ge("spot:",t),n.abrupt("return",t);case 5:case"end":return n.stop()}},e)})),J.apply(this,arguments)}function ke(e){return q.apply(this,arguments)}function q(){return q=(0,B.Z)((0,y.Z)().mark(function e(t){var a;return(0,y.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.FUTURE+"/dapi/v1/ticker/price?symbol=".concat(t)).then(function(s){return s[0].price});case 2:return a=r.sent,ge("future:",a),r.abrupt("return",a);case 5:case"end":return r.stop()}},e)})),q.apply(this,arguments)}function ye(e,t){return _.apply(this,arguments)}function _(){return _=(0,B.Z)((0,y.Z)().mark(function e(t,a){var n;return(0,y.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=Date.now(),s.abrupt("return",I.ZP.get("https://m1-coin.littlebrother.icu/api/",{method:"GET",headers:{"X-MBX-APIKEY":t.ak,"X-URL":{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["SPOT"+a]+"/api/v3/account"},params:{timestamp:n,recvWindow:5e3,signature:N().HmacSHA256("timestamp=".concat(n,"&recvWindow=5000"),t.sk).toString()}}));case 2:case"end":return s.stop()}},e)})),_.apply(this,arguments)}function $e(e){return ee.apply(this,arguments)}function ee(){return ee=(0,B.Z)((0,y.Z)().mark(function e(t){var a,n=arguments;return(0,y.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=n.length>1&&n[1]!==void 0?n[1]:"BTC",s.abrupt("return",ye(t,"").then(function(l){if(l&&l.balances){var v=l.balances.find(function(d){return d.asset===a});return v.free}else return"0"}));case 2:case"end":return s.stop()}},e)})),ee.apply(this,arguments)}function Me(e){return te.apply(this,arguments)}function te(){return te=(0,B.Z)((0,y.Z)().mark(function e(t){return(0,y.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",re(t,"").then(function(r){var s=Fe(r);return s?s.availableBalance:0}));case 1:case"end":return n.stop()}},e)})),te.apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return ne=(0,B.Z)((0,y.Z)().mark(function e(t,a){var n;return(0,y.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=Date.now(),s.abrupt("return",I.ZP.get("https://m1-coin.littlebrother.icu/api/",{method:"GET",headers:{"X-MBX-APIKEY":t.ak,"X-URL":{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+a]+"/dapi/v1/account"},params:{timestamp:n,recvWindow:5e3,signature:N().HmacSHA256("timestamp=".concat(n,"&recvWindow=5000"),t.sk).toString()}}));case 2:case"end":return s.stop()}},e)})),ne.apply(this,arguments)}function Se(e,t,a,n){return ae.apply(this,arguments)}function ae(){return ae=(0,B.Z)((0,y.Z)().mark(function e(t,a,n,r){var s,l,v;return(0,y.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=Date.now(),n.timestamp=s,l=Object.keys(n).map(function(c){return"".concat(c,"=").concat(n[c])}).join("&"),v=N().HmacSHA256(l,r.sk).toString(),i.abrupt("return",(0,I.ZP)(a+"/api/?"+l+"&signature="+v,{method:"POST",headers:{"X-MBX-APIKEY":r.ak,"X-URL":t}}));case 5:case"end":return i.stop()}},e)})),ae.apply(this,arguments)}function Ve(e,t,a){return ue.apply(this,arguments)}function ue(){return ue=(0,B.Z)((0,y.Z)().mark(function e(t,a,n){var r;return(0,y.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r="fromSpot",a=="FUTURE"&&(r="fromFuture"),l.abrupt("return",Te({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.SPOT,"https://m1-coin.littlebrother.icu",r,"BTC",n,t));case 3:case"end":return l.stop()}},e)})),ue.apply(this,arguments)}function Te(e,t,a,n,r,s){return se.apply(this,arguments)}function se(){return se=(0,B.Z)((0,y.Z)().mark(function e(t,a,n,r,s,l){var v,d,i,c,S;return(0,y.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(v=Date.now(),d=n=="fromSpot"?3:4,i={asset:r,amount:s,type:d,timestamp:v,recvWindow:5e3},!(!l||!l.ak)){h.next=5;break}return h.abrupt("return",new Promise(function(p,T){T({data:"\u672A\u6DFB\u52A0\u8D26\u6237"})}));case 5:return c=Object.keys(i).map(function(p){return"".concat(p,"=").concat(i[p])}).join("&"),S=N().HmacSHA256(c,l.sk).toString(),h.abrupt("return",(0,I.ZP)(a+"/api/?"+c+"&signature="+S,{method:"POST",headers:{"X-MBX-APIKEY":l.ak,"X-URL":t+"/sapi/v1/futures/transfer"}}));case 8:case"end":return h.stop()}},e)})),se.apply(this,arguments)}function Ne(e,t){return ie.apply(this,arguments)}function ie(){return ie=(0,B.Z)((0,y.Z)().mark(function e(t,a){return(0,y.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Qe({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.SPOT,"https://m1-coin.littlebrother.icu",a,t,!1,"RESULT","USDT").then(function(s){return{success:!0,btc:s.executedQty,usdt:s.cummulativeQuoteQty}}));case 1:case"end":return r.stop()}},e)})),ie.apply(this,arguments)}function Ft(e,t){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",He({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.SPOT,"https://m1-coin.littlebrother.icu",a,t,!1,"RESULT").then(function(s){console.log("spot sell response",s)}));case 1:case"end":return r.stop()}},e)})),le.apply(this,arguments)}function He(e,t,a,n,r){return oe.apply(this,arguments)}function oe(){return oe=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,a,n,r,s){var l,v,d,i,c,S=arguments;return _regeneratorRuntime().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(l=S.length>5&&S[5]!==void 0?S[5]:"FULL",v=Date.now(),d={symbol:"BTCUSDT",side:"SELL",type:"MARKET",quantity:n,timestamp:v,newOrderRespType:l,recvWindow:5e3},!(!r||!r.ak)){h.next=5;break}return h.abrupt("return",new Promise(function(p,T){T({data:"\u672A\u6DFB\u52A0\u73B0\u8D27\u8D26\u6237"})}));case 5:return i=Object.keys(d).map(function(p){return"".concat(p,"=").concat(d[p])}).join("&"),c=CryptoJS.HmacSHA256(i,r.sk).toString(),h.abrupt("return",request(a+"/api/?"+i+"&signature="+c,{method:"POST",headers:{"X-MBX-APIKEY":r.ak,"X-URL":t+(s?"/api/v3/order/test":"/api/v3/order")}}));case 8:case"end":return h.stop()}},e)})),oe.apply(this,arguments)}function Qe(e,t,a,n,r){return ce.apply(this,arguments)}function ce(){return ce=(0,B.Z)((0,y.Z)().mark(function e(t,a,n,r,s){var l,v,d,i,c,S,m=arguments;return(0,y.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=m.length>5&&m[5]!==void 0?m[5]:"ACK",v=m.length>6&&m[6]!==void 0?m[6]:"BTC",d=Date.now(),i={symbol:"BTCUSDT",side:"BUY",type:"MARKET",timestamp:d,newOrderRespType:l,recvWindow:5e3},v=="USDT"?i.quoteOrderQty=n:i.quantity=n,!(!r||!r.ak)){p.next=7;break}return p.abrupt("return",new Promise(function(T,o){o({data:"\u672A\u6DFB\u52A0\u73B0\u8D27\u8D26\u6237"})}));case 7:return c=Object.keys(i).map(function(T){return"".concat(T,"=").concat(i[T])}).join("&"),S=N().HmacSHA256(c,r.sk).toString(),p.abrupt("return",(0,I.ZP)(a+"/api/?"+c+"&signature="+S,{method:"POST",headers:{"X-MBX-APIKEY":r.ak,"X-URL":t+(s?"/api/v3/order/test":"/api/v3/order")}}));case 10:case"end":return p.stop()}},e)})),ce.apply(this,arguments)}function Le(e,t,a,n,r,s){return pe.apply(this,arguments)}function pe(){return pe=(0,B.Z)((0,y.Z)().mark(function e(t,a,n,r,s,l){return(0,y.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!s||!s.ak)){d.next=2;break}return d.abrupt("return",new Promise(function(i,c){c("\u672A\u6DFB\u52A0\u671F\u8D27\u8D26\u6237")}));case 2:return d.abrupt("return",Se(t+(l?"/dapi/v1/order/test":"/dapi/v1/order"),a,{symbol:n,side:"BUY",quantity:r,type:"MARKET"},s));case 3:case"end":return d.stop()}},e)})),pe.apply(this,arguments)}function Xe(e,t,a){return fe.apply(this,arguments)}function fe(){return fe=(0,B.Z)((0,y.Z)().mark(function e(t,a,n){return(0,y.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ye({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}.FUTURE,"https://m1-coin.littlebrother.icu",a,1,n,t,!1));case 1:case"end":return s.stop()}},e)})),fe.apply(this,arguments)}function Ye(e,t,a,n,r,s,l){return de.apply(this,arguments)}function de(){return de=(0,B.Z)((0,y.Z)().mark(function e(t,a,n,r,s,l,v){return(0,y.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!l||!l.ak)){i.next=2;break}return i.abrupt("return",new Promise(function(c,S){S("\u672A\u6DFB\u52A0\u671F\u8D27\u8D26\u6237")}));case 2:return i.abrupt("return",Se(t+(v?"/dapi/v1/order/test":"/dapi/v1/order"),a,{symbol:n,side:"SELL",quantity:s,type:"MARKET"},l));case 3:case"end":return i.stop()}},e)})),de.apply(this,arguments)}function be(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,t=G()(e),a=G()(W()),n=G()(Oe());return{quarter:[a.format("YYMMDD"),a.diff(t,"days")],nextQuarter:[n.format("YYMMDD"),n.diff(t,"days")]}}function Zt(e,t){if(!t)return e.actuals_price;if(t==e.quarter)return e.futures_price;if(t==e.nextQuarter)return e.futures_next_price}function ze(e,t){return e.reduce(function(a,n){return a[n[t]]=n,a},{})}function Ge(e){return e?e.reduce(function(t,a,n){return t[n]="[".concat(a.env,"]").concat(a.alias),t},{}):[]}function Fe(e){if(e&&e.assets){var t=e.assets.find(function(a){return a.asset==="BTC"});return t}else return null}function Ze(e){return e&&e.positions?e.positions.filter(function(t){return t.positionAmt!=0}):[]}function xe(e){var t=new he.Z(0);return e&&e.positions?(t=e.positions.reduce(function(a,n){var r=a;return n.symbol.startsWith("BTCUSD")&&n.positionAmt!=0&&(r=he.Z.add(a,n.notionalValue)),r},t),t.toString()):0}function Ee(e){if(e&&e.positions){var t=e.positions.filter(function(a){return a.symbol.startsWith("BTCUSD")});return t.reduce(function(a,n){return a[n.symbol]=n.symbol,a},{})}else return{}}function xt(e){var t={};return t[e.quarter]=e.quarter,t[e.nextQuarter]=e.nextQuarter,t}var u=g(85893),Be=function(e){var t=e.accounts,a=e.updateKey;if(!t)return(0,u.jsx)(u.Fragment,{});var n=Ge(t);return(0,u.jsx)(Ce.ZP,{submitter:!1,onValuesChange:function(s){Object.keys(s).length===0&&a(null),"account"in s&&a({ak:t[s.account].ak,sk:t[s.account].sk})},children:(0,u.jsx)(we.Z,{name:"account",valueEnum:n})})},x=g(67294),We=function(e){var t=e.setSpotKey,a=e.accounts,n=e.refreshInterval,r=e.env;if(!a)return(0,u.jsx)(u.Fragment,{});var s=(0,x.useState)(null),l=(0,j.Z)(s,2),v=l[0],d=l[1],i=(0,x.useState)(0),c=(0,j.Z)(i,2),S=c[0],m=c[1];function h(b){d(b),t(b)}var p=(0,x.useState)({}),T=(0,j.Z)(p,2),o=T[0],Z=T[1],R=function(){var b=(0,B.Z)((0,y.Z)().mark(function F(){var U,K;return(0,y.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(v){P.next=2;break}return P.abrupt("return");case 2:return P.prev=2,P.next=5,ye(v,r);case 5:U=P.sent,K=ze(U.balances,"asset"),O.Z.close("updateSpotBalance"),Z(K),m(K.BTC.free),P.next=17;break;case 12:P.prev=12,P.t0=P.catch(2),O.Z.warning({message:"\u73B0\u8D27\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateSpotBalance",description:JSON.stringify(P.t0.data),placement:"bottomRight",duration:15}),console.log(P.t0.data),Z({});case 17:case"end":return P.stop()}},F,null,[[2,12]])}));return function(){return b.apply(this,arguments)}}();return(0,x.useEffect)(function(){R();var b=setInterval(R,n*1e3);return function(){clearInterval(b)}},[v,r]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.ZP,{ghost:!0,children:(0,u.jsx)(Be,{accounts:a,updateKey:h,type:"spot"})}),(!o||!o.USDT)&&(0,u.jsx)(Q.Z,{active:!0}),o&&o.USDT&&(0,u.jsxs)(w.ZP,{wrap:!0,ghost:!0,children:[(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:o.USDT.free,title:"USDT.free:"}}),(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:o.BTC.free,title:"BTC.free:"}})]})]})},Je=function(e){var t=e.setFutureKey,a=e.accounts,n=e.refreshInterval,r=e.env;if(!a)return(0,u.jsx)(u.Fragment,{});var s=(0,x.useState)(0),l=(0,j.Z)(s,2),v=l[0],d=l[1],i=(0,x.useState)(null),c=(0,j.Z)(i,2),S=c[0],m=c[1];function h(U){t(U),m(U)}var p=(0,x.useState)({}),T=(0,j.Z)(p,2),o=T[0],Z=T[1],R=function(){var U=(0,B.Z)((0,y.Z)().mark(function K(){var C,P,V;return(0,y.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(S){D.next=2;break}return D.abrupt("return");case 2:return D.prev=2,D.next=5,re(S,r);case 5:C=D.sent,P=Ee(C),V=xe(C),Z(C),d(Number(V)),O.Z.close("updateFutureBalance"),D.next=18;break;case 13:D.prev=13,D.t0=D.catch(2),O.Z.warning({message:"\u5408\u7EA6\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateFutureBalance",description:JSON.stringify(D.t0.data),placement:"bottomRight",duration:15}),console.log(D.t0),Z({});case 18:case"end":return D.stop()}},K,null,[[2,13]])}));return function(){return U.apply(this,arguments)}}();(0,x.useEffect)(function(){R();var U=setInterval(R,n*1e3);return function(){clearInterval(U)}},[S,r]);var b=null,F=[];return o&&o.assets&&(b=Fe(o),F=Ze(o)),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.ZP,{ghost:!0,children:(0,u.jsx)(Be,{accounts:a,updateKey:h,type:"future"})}),(!o||!b)&&(0,u.jsx)(Q.Z,{active:!0}),o&&b&&(0,u.jsxs)(w.ZP,{wrap:!0,ghost:!0,children:[(0,u.jsxs)(A.Z.Group,{children:[(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:b.availableBalance,title:"\u53EF\u7528BTC:"}}),(0,u.jsx)(w.ZP.Divider,{}),(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:b.maintMargin,title:"\u7EF4\u6301\u4FDD\u8BC1\u91D1:"}})]}),(0,u.jsxs)(A.Z.Group,{children:[(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:b.marginBalance,title:"\u4FDD\u8BC1\u91D1\u4F59\u989D:"}}),(0,u.jsx)(w.ZP.Divider,{}),(0,u.jsx)(A.Z,{ghost:!0,statistic:{value:b.walletBalance,title:"\u94B1\u5305\u4F59\u989D:"}})]})]})]})},Et=g(3515),qe=g(86288),_e=g(48717),$=A.Z.Statistic,et=function(e){var t=e.env,a=(0,x.useState)({actuals_price:0,futures_price:0,futures_next_price:0,left_days:10,left_next_days:10,quarter:"BTCUSD_",nextQuarter:"BTCUSD"}),n=(0,j.Z)(a,2),r=n[0],s=n[1],l=function(){var m=be(),h=I.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["SPOT"+t]+"/api/v3/ticker/price?symbol=BTCUSDT"),p=I.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+t]+"/dapi/v1/ticker/price?symbol=BTCUSD_".concat(m.quarter[0])),T=I.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+t]+"/dapi/v1/ticker/price?symbol=BTCUSD_".concat(m.nextQuarter[0]));Promise.all([h,p,T]).then(function(o){var Z=(0,j.Z)(o,3),R=Z[0],b=Z[1],F=Z[2],U={actuals_price:R.price,futures_price:b[0].price,futures_next_price:F[0].price,left_days:m.quarter[1],left_next_days:m.nextQuarter[1],quarter:"BTCUSD_"+m.quarter[0],nextQuarter:"BTCUSD_"+m.nextQuarter[0]};s(U)})},v=(0,x.useState)(!1),d=(0,j.Z)(v,2),i=d[0],c=d[1];return(0,x.useEffect)(function(){var S=setInterval(function(){l()},1e3);return function(){return clearInterval(S)}},[t]),(0,u.jsx)(_e.Z,{onResize:function(m){c(m.width<692)},children:(0,u.jsx)(qe.Z,{offsetTop:45,children:(0,u.jsxs)(A.Z.Group,{direction:i?"column":"row",span:24,children:[(0,u.jsx)(A.Z,{title:"\u73B0\u8D27\u4EF7\u683C",statistic:{value:(+r.actuals_price).toFixed(2),suffix:"USDT",valueStyle:{fontWeight:"bold"}}}),(0,u.jsx)(A.Z,{title:"\u5F53\u5B63: "+r.quarter,statistic:{value:((r.futures_price-r.actuals_price)*100*365/(r.actuals_price*r.left_days)).toFixed(2),prefix:(0,u.jsx)("span",{style:{fontSize:16},children:"\u5E74\u5316"}),valueStyle:{fontWeight:"bold"},suffix:"%"},extra:(0,u.jsx)($,{value:r.left_days,title:"\u5269\u4F59\u5929\u6570: ",layout:"horizontal"}),footer:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)($,{value:(+r.futures_price).toFixed(2),suffix:"USDT",title:"\u671F\u8D27\u4EF7\u683C",layout:"horizontal"}),(0,u.jsx)($,{value:((r.futures_price-r.actuals_price)*100/r.actuals_price).toFixed(2),suffix:"%",title:"margin",layout:"horizontal"})]})}),(0,u.jsx)(A.Z,{title:"\u6B21\u5B63: "+r.nextQuarter,statistic:{value:((r.futures_next_price-r.actuals_price)*100*365/(r.actuals_price*r.left_next_days)).toFixed(2),prefix:(0,u.jsx)("span",{style:{fontSize:16},children:"\u5E74\u5316"}),valueStyle:{fontWeight:"bold"},suffix:"%"},extra:(0,u.jsx)($,{value:r.left_next_days,title:"\u5269\u4F59\u5929\u6570: ",layout:"horizontal"}),footer:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)($,{value:(+r.futures_next_price).toFixed(2),suffix:"USDT",title:"\u671F\u8D27\u4EF7\u683C",layout:"horizontal"}),(0,u.jsx)($,{value:((r.futures_next_price-r.actuals_price)*100/r.actuals_price).toFixed(2),suffix:"%",title:"margin",layout:"horizontal"})]})})]})})},"resize-observer")},Bt=g(57663),M=g(71577),tt=g(17253),rt=g(60014),nt=g(86615),at=function(e){var t=e.accounts,a=e.spotUrl,n=e.spotKey,r=e.futureKey,s=(0,x.useRef)(),l=(0,x.useState)(!1),v=(0,j.Z)(l,2),d=v[0],i=v[1],c=function(m){var h,p;(h=s.current)===null||h===void 0||(p=h.validateFieldsReturnFormatValue)===null||p===void 0||p.call(h).then(function(T){i(!0);var o=T.quantity,Z=T.asset,R=m=="fromSpot"?n:r,b=Te(a,"https://m1-coin.littlebrother.icu",m,Z,o,R);b.then(function(){O.Z.info({message:"\u4ECE "+(m=="fromSpot"?"\u73B0\u8D27":"\u5408\u7EA6")+" \u8F6C\u51FA\u6210\u529F",description:"",placement:"bottomRight",duration:15})}).catch(function(F){O.Z.warning({message:"\u4ECE "+(m=="fromSpot"?"\u73B0\u8D27":"\u5408\u7EA6")+" \u8F6C\u51FA\u5931\u8D25",description:JSON.stringify(F.data),placement:"bottomRight",duration:30})})})};return t?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(tt.A,{grid:!0,formRef:s,rowProps:{gutter:[16,16]},layout:"horizontal",submitter:!1,initialValues:{asset:"BTC"},children:[(0,u.jsx)(nt.Z.Group,{name:"asset",radioType:"button",options:["BTC","USDT"]}),(0,u.jsx)("br",{}),(0,u.jsx)(rt.Z,{name:"quantity",required:!0,rules:[{required:!0,message:"\u8F93\u5165\u6570\u5B57"}]}),(0,u.jsx)(M.Z,{type:"primary",onClick:function(){c("fromSpot")},children:">>\u73B0\u8D27\u8F6C\u5408\u7EA6>>"}),(0,u.jsx)(M.Z,{type:"primary",onClick:function(){c("fromFuture")},children:"<<\u5408\u7EA6\u8F6C\u73B0\u8D27<<"})]})}):(0,u.jsx)(u.Fragment,{})},Pt=g(71194),ut=g(50146),st=g(57119),it=g(16894),lt=function(e){var t=e.balances,a=e.futureKey,n=e.futureUrl;if(!t)return(0,u.jsx)(u.Fragment,{});var r=ut.Z.confirm,s=function(){r({title:"\u6CE8\u610F\uFF0C\u5207\u52FF\u91CD\u590D\u4E0B\u5355",icon:(0,u.jsx)(st.Z,{}),content:"\u4E00\u952E\u5E73\u4ED3\u5DF2\u4F7F\u7528\u5E02\u4EF7\u4E0B\u5355\uFF0C\u5207\u52FF\u91CD\u590D\u70B9\u51FB\uFF0C\u9632\u6B62\u91CD\u590D\u4E0B\u5355"})},l=function(c){var S=-1*c.positionAmt,m=Le(n,"https://m1-coin.littlebrother.icu",c.symbol,S,a,!1);m.then(function(h){s(),O.Z.info({message:"\u4E00\u952E\u5E73\u4ED3\u5DF2\u4E0B\u5355",description:"",placement:"bottomRight",duration:15})}).catch(function(h){O.Z.warning({message:"\u4E00\u952E\u5E73\u4ED3\u4E0B\u5355\u5931\u8D25",description:JSON.stringify(h.data),placement:"bottomRight",duration:15})})},v=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5408\u7EA6",dataIndex:"symbol",copyable:!0},{title:"x",dataIndex:"leverage"},{title:"\u6570\u91CF",dataIndex:"positionAmt"},{title:"\u4FDD\u8BC1\u91D1\u5360\u7528",dataIndex:"notionalValue"},{title:"\u6301\u4ED3\u6210\u672C",dataIndex:"entryPrice"},{title:"\u7EF4\u6301\u4FDD\u8BC1\u91D1",dataIndex:"maintMargin"},{title:"\u672A\u5B9E\u73B0\u76C8\u4E8F",dataIndex:"unrealizedProfit"},{title:"\u6700\u5927\u53EF\u5F00\u4ED3\u6570",dataIndex:"maxQty"},{title:"\u4E00\u952E\u5E73\u4ED3",valueType:"option",key:"option",render:function(c,S,m,h){return[(0,u.jsx)(M.Z,{type:"link",onClick:function(){l(S)},children:"\u5E02\u4EF7"},"closePosition")]}}],d=[];return t&&t.assets&&(d=Ze(t)),(0,u.jsx)(w.ZP,{span:{xs:24,l:12},collapsible:!0,title:"\u5408\u7EA6\u6301\u4ED3\u660E\u7EC6",defaultCollapsed:!0,children:t&&(0,u.jsx)(it.ZP,{columns:v,dataSource:d,rowKey:"symbol",search:!1,options:{setting:{listsHeight:400}},dateFormatter:"string"})})},ot=function(e){var t=e.spotKey,a=e.futureKey,n=e.env,r=e.refreshInterval,s=(0,x.useState)({}),l=(0,j.Z)(s,2),v=l[0],d=l[1],i=(0,x.useState)(0),c=(0,j.Z)(i,2),S=c[0],m=c[1],h=function(){var p=(0,B.Z)((0,y.Z)().mark(function T(){var o,Z,R;return(0,y.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(a){F.next=2;break}return F.abrupt("return");case 2:return F.prev=2,F.next=5,re(a,n);case 5:o=F.sent,Z=Ee(o),R=xe(o),d(o),m(Number(R)),O.Z.close("updateFutureBalance"),F.next=18;break;case 13:F.prev=13,F.t0=F.catch(2),O.Z.warning({message:"\u5408\u7EA6\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateFutureBalance",description:JSON.stringify(F.t0.data),placement:"bottomRight",duration:15}),console.log(F.t0),d({});case 18:case"end":return F.stop()}},T,null,[[2,13]])}));return function(){return p.apply(this,arguments)}}();return(0,x.useEffect)(function(){h();var p=setInterval(h,r*1e3);return function(){clearInterval(p)}},[a,n]),a?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(w.ZP,{ghost:!0,style:{marginBottom:20},children:(0,u.jsx)(lt,{balances:v,futureUrl:{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+n],futureKey:a})})}):(0,u.jsx)(u.Fragment,{})},ct=g(56037),pt=function(e){var t=e.update,a=e.submit,n=e.cancel,r=e.isRunning,s=(0,x.useRef)(),l=be(),v=[{title:"\u5408\u7EA6",dataIndex:"symbolKey",valueType:"select",readonly:r,valueEnum:function(){var i=new Map;return i.set("quarter",{text:"BTCUSD_".concat(l.quarter[0])}),i.set("nextQuarter",{text:"BTCUSD_".concat(l.nextQuarter[0])}),i},colProps:{xs:24,md:8},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5408\u7EA6\u540D\u79F0",dataIndex:"symbol",valueType:"text",readonly:!0,dependencies:["symbolKey"],fieldProps:function(i){var c=i.getFieldValue("symbolKey");return c&&i.setFieldValue("symbol","BTCUSD_".concat(l[c][0])),{}}},{title:"\u5408\u7EA6\u5269\u4F59\u5929\u6570",dataIndex:"leftDayNum",valueType:"digit",readonly:!0,dependencies:["symbolKey"],fieldProps:function(i){var c=i.getFieldValue("symbolKey");return c&&i.setFieldValue("leftDayNum",l[c][1]),{}}},{title:"\u6570\u91CF",dataIndex:"contAmount",valueType:"digit",initialValue:100,readonly:r,fieldProps:{min:1,step:1,precision:0,addonAfter:"Cont"}},{title:"margin\u4E0B\u9650",tooltip:"\u5E74\u5316\u6536\u76CA\uFF0C\u672A\u8BA1\u7B97\u624B\u7EED\u8D39\uFF0C\u5F53margin\u5C0F\u4E8E\u6B64\u503C\u65F6\u7B49\u5F85",dataIndex:"hr",valueType:"digit",initialValue:15,fieldProps:{min:5,max:100,step:.01,precision:2,addonAfter:"%"},transform:function(i){return+(i/100).toFixed(4)}},{title:"\u7B49\u5F85\u95F4\u9694",dataIndex:"waitTime",valueType:"digit",initialValue:5,fieldProps:{min:1,step:1,precision:0,addonAfter:"s"}},{title:"\u6BCF\u6B21\u5408\u7EA6\u8D2D\u4E70\u5F20\u6570",tooltip:"1Cont=100USD",dataIndex:"contNum",valueType:"digit",initialValue:1,fieldProps:{min:1,step:1,precision:0,addonAfter:"Cont"}},{title:"epoch",dataIndex:"epoch",valueType:"digit",readonly:!0,dependencies:["contAmount","contNum"],fieldProps:function(i){var c=i.getFieldValue("contAmount"),S=i.getFieldValue("contNum");return i.setFieldValue("epoch",c/S),{precision:0}}},{title:"\u5355\u5F20\u5408\u7EA6\u4EF7\u503C($)",dataIndex:"contPreValue",valueType:"digit",readonly:!0,initialValue:100,fieldProps:{min:1,step:1,precision:2,addonAfter:"$"}},{title:"=====\u6682\u65F6\u4E0D\u7528\u7684\u914D\u7F6E=====",valueType:"group",colProps:{xs:24},columns:[{title:"\u73B0\u8D27\u624B\u7EED\u8D39\u7387",dataIndex:"feeRatio",valueType:"digit",initialValue:.1,fieldProps:{max:.1,step:.01,precision:4,addonAfter:"%",disabled:!0}},{title:"\u5408\u7EA6\u624B\u7EED\u8D39\u7387",dataIndex:"futureFeeRatio",valueType:"digit",initialValue:.02,fieldProps:{max:.02,step:.002,precision:4,addonAfter:"%",disabled:!0}},{title:"USD<->USDT",tooltip:"1\u7F8E\u91D1\u53EF\u4EE5\u5151\u6362\u7684USDT\u6570\u91CF",dataIndex:"usdtRatio",valueType:"digit",initialValue:1.0002,fieldProps:{min:.999,max:1.001,step:1e-4,precision:4,disabled:!0}}]}];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(ct.Z,{size:"small",colProps:{span:8},rowProps:{gutter:32},grid:!0,shouldUpdate:!1,layoutType:"Form",formRef:s,submitter:{render:function(i,c){return[(0,u.jsx)(M.Z,{htmlType:"button",hidden:r,onClick:function(){var m,h;(m=s.current)===null||m===void 0||(h=m.validateFieldsReturnFormatValue)===null||h===void 0||h.call(m).then(function(p){a(p)})},type:"primary",children:"\u63D0\u4EA4"},"submit"),(0,u.jsx)(M.Z,{htmlType:"button",hidden:!r,onClick:function(){var m,h;(m=s.current)===null||m===void 0||(h=m.validateFieldsReturnFormatValue)===null||h===void 0||h.call(m).then(function(p){t(p)})},children:"\u52A8\u6001\u66F4\u65B0"},"update"),(0,u.jsx)(M.Z,{htmlType:"button",hidden:!r,onClick:function(){n()},danger:!0,children:"\u7EC8\u6B62"},"cancel")]}},columns:v})})},E=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];console.log(a)},L=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";E("=".repeat(20)+t+"=".repeat(20))},ft=function(e){var t=e.spotKey,a=e.futureKey;if(!t||!a)return(0,u.jsx)(u.Fragment,{});var n=(0,x.useState)(!1),r=(0,j.Z)(n,2),s=r[0],l=r[1],v=(0,x.useRef)(!0);console.log("init");var d=0;function i(p,T){return c.apply(this,arguments)}function c(){return c=(0,B.Z)((0,y.Z)().mark(function p(T,o){var Z;return(0,y.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Z=Promise.all([Ie(),ke(T)]).then(function(F){var U=(0,j.Z)(F,2),K=U[0],C=U[1];return d=Number(K),S(K,C,o)}),b.abrupt("return",Z);case 2:case"end":return b.stop()}},p)})),c.apply(this,arguments)}function S(p,T,o){var Z=(T-p)/p*365*100/o;return E("margin:",Z.toFixed(2)+"%"),Number.isFinite(Z)?Z:0}function m(p,T){var o=!0;return p<T&&(o=!1),o}var h=function(){var p=(0,B.Z)((0,y.Z)().mark(function T(o){var Z,R,b,F,U,K,C,P,V,X,D,vt,H,Pe,Y,z,ht,Ue;return(0,y.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return H=function(){E("stop"),l(!1),v.current=!0},v.current=!1,l(!0),L(),E("symbol",o.symbol),E("\u5F20\u6570\uFF0C1\u5F20=".concat(o.contPreValue,"usd"),o.contAmount),E("Hurdle rate",(o.hr*100).toFixed(2)+"%"),L(),Z=o.epoch,E("epoch",Z),R=o.contNum*o.contPreValue,E("\u5269\u4F59\u5230\u671F\u5929\u6570",o.leftDayNum),b=1,F=0,U=5,f.next=17,i(o.symbol,o.leftDayNum);case 17:return K=f.sent,E("\u5F53\u524Dmargin",K),E("\u5F53\u524DbtcValue",d),C=0,f.next=23,Me(a);case 23:if(f.t0=f.sent,f.t1=d,f.t2=f.t0*f.t1,f.t3=U,!(f.t2<f.t3)){f.next=39;break}return f.next=30,$e(t,"BTC");case 30:if(f.t4=f.sent,f.t5=d,f.t6=f.t4*f.t5,f.t7=U,!(f.t6<f.t7)){f.next=36;break}C+=2;case 36:C+=1,f.next=40;break;case 39:C=0;case 40:E("bufferFlag 0\u4E0D\u9700\u8981\u989D\u5916\u64CD\u4F5C 1\uFF0C\u53EA\u9700\u8981\u989D\u5916\u8F6C\u8D26\uFF0C3,\u591A\u8D2D\u4E70\u5E76\u8F6C\u8D26",C),P=0,V=0,X=0,D=0,vt=0;case 46:if(!(!v.current&&b<=Z)){f.next=85;break}return L(b),f.next=50,i(o.symbol);case 50:if(Pe=f.sent,Y=R,!m(Pe,o.hr)){f.next=80;break}return b==1&&(C==2||C==3)&&(Y+=U),E("\u9700\u8981\u8D2D\u4E70btc\u7684\u6570\u91CF\uFF0Cusdt\u8BA1\u4EF7",Y),f.next=57,Ne(t,Y.toFixed(2)).catch(function(k){H(),E("buy btc error:",k.data)});case 57:if(z=f.sent,!v.current){f.next=60;break}return f.abrupt("break",85);case 60:return E("continue!"),P+=Number(z.btc),V+=Number(z.usdt),F=z.btc,f.next=66,Ve(t,"SPOT",F).catch(function(k){H(),E("transfer btc error:",k.data)});case 66:if(ht=f.sent,!v.current){f.next=69;break}return f.abrupt("break",85);case 69:return X+=Number(F),f.next=72,Xe(a,o.symbol,o.contNum).catch(function(k){H(),E("future sell error:",k.data)});case 72:if(Ue=f.sent,!v.current){f.next=75;break}return f.abrupt("break",85);case 75:E("future sell res",Ue),D+=Number(o.contNum),b+=1,f.next=83;break;case 80:return E("\u7B49\u5F85"),f.next=83,new Promise(function(k){return setTimeout(k,o.waitTime)});case 83:f.next=46;break;case 85:L("finished"),E("\u73B0\u8D27\u4E70\u5165BTC\u6570\u91CF",P),E("\u73B0\u8D27\u4E70\u5165BTC\u6570\u91CF\u82B1\u8D39USDT",V),E("\u5212\u8F6CBTC\u6570\u91CF",X),E("\u5F00\u5355\u6570",D),H();case 91:case"end":return f.stop()}},T)}));return function(o){return p.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(pt,{update:function(){l(!1)},submit:function(T){l(!0),h(T)},cancel:function(){l(!1)},isRunning:s}),s&&(0,u.jsx)("span",{children:"running"}),(0,u.jsx)("button",{onClick:function(){v.current=!0},children:"cancel"})]})},dt=function(){var e=(0,B.Z)((0,y.Z)().mark(function t(){return(0,y.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,ve.WY)("https://m1-coin.littlebrother.icu/account/",{method:"GET",headers:{"Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},t)}));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=(0,x.useState)(""),t=(0,j.Z)(e,2),a=t[0],n=t[1],r=(0,ve.QT)(dt),s=(0,x.useState)(5),l=(0,j.Z)(s,2),v=l[0],d=l[1],i=(0,x.useState)(null),c=(0,j.Z)(i,2),S=c[0],m=c[1],h=(0,x.useState)(null),p=(0,j.Z)(h,2),T=p[0],o=p[1];return(0,u.jsxs)(De.Z,{children:[a=="_TEST"&&(0,u.jsx)(Re.Z,{message:"\u6CE8\u610F\uFF1A\u5F53\u524D\u4E3A\u6D4B\u8BD5\u6A21\u5F0F\uFF0C\u8C03\u7528\u7684\u63A5\u53E3\u5747\u4E3A\u5E01\u5B89\u6D4B\u8BD5\u7F51\u7EDC\uFF0C\u6D4B\u8BD5\u73AF\u5883\u53EF\u80FD\u56E0\u4E3A\u4EF7\u683C\u5DEE\u8DDD\u8F83\u5927\u5BFC\u81F4\u4E0B\u5355\u5931\u8D25\uFF08PERCENT_PRICE filter limit\uFF09\u7B49\u5176\u4ED6\u5F02\u5E38\u73B0\u8C61",banner:!0}),(0,u.jsx)(w.ZP,{ghost:!0,style:{marginBottom:20},title:"\u73B0\u8D27\u671F\u8D27\u5BF9\u51B2\u5957\u5229(BTC)",extra:(0,u.jsx)(je.Z,{defaultChecked:a!="_TEST",checkedChildren:"\u7EBF\u4E0A",unCheckedChildren:"\u6D4B\u8BD5",onChange:function(R){n(R?"":"_TEST")}}),children:(0,u.jsx)(et,{env:a})}),r.loading==!1&&r.data&&(0,u.jsxs)(w.ZP,{wrap:!0,style:{marginBottom:20},bodyStyle:{padding:0},children:[(0,u.jsx)(w.ZP,{colSpan:10,children:(0,u.jsx)(We,{setSpotKey:o,accounts:r.data,refreshInterval:v,env:a})}),(0,u.jsx)(w.ZP,{colSpan:4,children:(0,u.jsx)(at,{accounts:r.data,spotKey:T,futureKey:S,spotUrl:{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["SPOT"+a]})}),(0,u.jsx)(w.ZP,{colSpan:10,children:(0,u.jsx)(Je,{setFutureKey:m,accounts:r.data,refreshInterval:v,env:a})})]}),(0,u.jsx)(ot,{spotKey:T,futureKey:S,refreshInterval:v,env:a}),(0,u.jsx)(w.ZP,{style:{marginBottom:20},children:(0,u.jsx)(ft,{spotKey:T,futureKey:S})})]})}},42480:function(){}}]);
