(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[465],{94916:function(v,p,r){"use strict";r.r(p),r.d(p,{default:function(){return Q}});var l=r(72560);function m(n){if(Array.isArray(n))return(0,l.Z)(n)}function C(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}var F=r(64254);function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(n){return m(n)||C(n)||(0,F.Z)(n)||b()}var g=r(11849),I=r(2824),A=r(67294),Z=r(45840),U=r(68311),o=r(85893),K=function(x){var w=x.dataSource,T=function(h){var i=[];return h.forEach(function(f,D){var s=f.data;i.push({coin:f.coin,index:D+1,symbol:s[0].name,spotPrice:s[0].price,fPrice:s[1].price,fSymbol:s[1].name,margin:+((s[1].price-s[0].price)/s[0].price*100).toFixed(2),t:f.t,d:f.d})}),i}(w),P=[{title:"\u6392\u5E8F",dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u4EA4\u6613\u5BF9",dataIndex:"symbol",render:function(i,f){return(0,o.jsxs)(o.Fragment,{children:[i," ",(0,o.jsx)("span",{style:{fontSize:"smaller",color:"lightgray"},children:f.fSymbol})]})},width:200},{title:"\u73B0\u8D27\u4EF7\u683C",dataIndex:"spotPrice",width:100},{title:"\u5408\u7EA6\u4EF7\u683C",dataIndex:"fPrice",width:100},{title:"\u5408\u7EA6\u7C7B\u578B",dataIndex:"t",valueEnum:{d:"\u5E01\u672C\u4F4D CM",f:"U\u672C\u4F4D"},filters:!0,onFilter:!0},{title:"Margin",dataIndex:"margin",sorter:function(i,f){return i.margin-f.margin},renderText:function(i){return i==-100?"-":"".concat(i,"%")}},{title:"\u671F\u9650",dataIndex:"d",valueEnum:{q:"\u5F53\u5B63",n:"\u6B21\u5B63",p:"\u6C38\u7EED"},filters:!0,onFilter:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(){return[(0,o.jsx)("a",{children:"\u7F16\u8F91"},"edit"),(0,o.jsx)("a",{children:"\u5220\u9664"},"delete")]}}];return(0,o.jsx)("div",{children:(0,o.jsx)(U.Z,{columns:P,dataSource:T,rowKey:"index",search:!1,pagination:!1,options:!1})})},M=K,R=r(19228),H=function(){var x=[],w=[],T=[],P=(0,A.useState)(!1),h=(0,I.Z)(P,2),i=h[0],f=h[1],D=(0,R.Gm)(),s=(0,I.Z)(D,2),B=s[0],L=s[1];console.log(B,L);var G={spot:"wss://stream.binance.com:9443",futures:"wss://fstream.binance.com",delivery:"wss://dstream.binance.com"},z=(0,A.useState)([]),N=(0,I.Z)(z,2),E=N[0],X=N[1],J=function(e,t){var a=e.s,u=parseFloat(e.p),S=e.T,d="s";switch(t){case"spot":d="s";break;case"futures":d="f";break;case"delivery":d="d";break}E.forEach(function(c,q){d==="s"&&c.data[0].name===a?(c.data[0].price=u,c.data[0].time=S):d===c.t&&c.data[1].name===a&&(c.data[1].price=u,c.data[1].time=S)})},k=function(e,t){if(t.length!==0){var a=t.map(function(d){return"".concat(d.toLowerCase(),"@aggTrade")}).join("/"),u=G[e]+"/stream?streams="+a,S=new Z.w3cwebsocket(u);S.onopen=function(){console.log("WebSocket connection established for ".concat(e,",and the symbols are ").concat(t))},S.onclose=function(){console.log("WebSocket connection closed for ".concat(e))},S.onmessage=function(d){var c=JSON.parse(d.data);c==="Ping"?S.send("Pong"):J(c.data,e)}}},V=function(e){var t=W(e),a=(0,g.Z)((0,g.Z)({},e),{},{data:[{name:t.s,price:0,time:0},{name:t.f,price:0,time:0}]});return a},Y=function(){var e=[];return["BTC","ETH","BCH","LINK","BNB","DOT","ADA","LTC","XPR"].forEach(function(t){["d","f"].forEach(function(a){["BCH","LINK","BNB","DOT","ADA","LTC","XPR"].indexOf(t)&&a=="f"||["q","n","p"].forEach(function(u){e.push({coin:t,s:t+"USDT",f:t+(a=="d"?"USD":"USDT"),t:a,d:u})})})}),e},O=Y(),W=function(e){var t="";return e.d==="q"?t="_"+B:e.d==="n"?t="_"+L:e.t==="d"&&e.d==="p"&&(t="_PERP"),{s:e.s,f:e.f+t}},$=function(e){x=[],w=[],T=[],e.forEach(function(t,a){var u=W(t);t.t==="d"?T.push(u.f):t.t==="f"&&w.push(u.f),x.push(u.s)})};return(0,A.useEffect)(function(){console.log("init"),O.forEach(function(e,t){E.push(V(e))}),console.log(E),$(O),k("spot",x),k("futures",w),k("delivery",T);var y=setInterval(function(){X(j(E))},1e3);return function(){clearInterval(y)}},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{children:"\u6570\u636E\u4E3A\u5B9E\u65F6\u6700\u65B0\u6210\u4EA4\u6570\u636E\uFF0C\u5982\u679C\u6570\u636E\u4E3A0\uFF0C\u8BF4\u660E\u6682\u65F6\u672A\u6709\u6210\u4EA4\u8BB0\u5F55"}),(0,o.jsx)(M,{dataSource:E})]})},Q=H},284:function(v){var p=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};v.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(r){return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},45840:function(v,p,r){var l;if(typeof globalThis=="object")l=globalThis;else try{l=r(284)}catch(b){}finally{if(!l&&typeof window!="undefined"&&(l=window),!l)throw new Error("Could not determine global this")}var m=l.WebSocket||l.MozWebSocket,C=r(79387);function F(b,j){var g;return j?g=new m(b,j):g=new m(b),g}m&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(b){Object.defineProperty(F,b,{get:function(){return m[b]}})}),v.exports={w3cwebsocket:m?F:null,version:C}},79387:function(v,p,r){v.exports=r(12847).version},12847:function(v){"use strict";v.exports={version:"1.0.34"}}}]);
