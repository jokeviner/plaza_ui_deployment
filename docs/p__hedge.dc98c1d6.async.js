(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[98],{70949:function(Be,Y,i){"use strict";i.r(Y),i.d(Y,{default:function(){return be}});var Ce=i(77576),ee=i(12028),Ee=i(17462),te=i(76772),E=i(2824),K=i(90636),V=i(3182),re=i(21349),R=i(54433),L=i(70719),Pe=i(74379),k=i(38648),De=i(18446),M=i(90860),I=i(48773),ae=i(952),ne=i(64317),b=i(19228),e=i(85893),X=function(n){var u=n.accounts,s=n.updateKey;if(!u)return(0,e.jsx)(e.Fragment,{});var f=(0,b.wJ)(u);return(0,e.jsx)(ae.ZP,{submitter:!1,onValuesChange:function(F){Object.keys(F).length===0&&s(null),"account"in F&&s({ak:u[F.account].ak,sk:u[F.account].sk})},children:(0,e.jsx)(ne.Z,{name:"account",valueEnum:f})})},Z=i(67294),ue=function(n){var u=n.setSpotKey,s=n.accounts,f=n.refreshInterval,t=n.env;if(!s)return(0,e.jsx)(e.Fragment,{});var F=(0,Z.useState)(null),y=(0,E.Z)(F,2),g=y[0],T=y[1],c=(0,Z.useState)(0),d=(0,E.Z)(c,2),S=d[0],l=d[1];function m(p){T(p),u(p)}var o=(0,Z.useState)({}),h=(0,E.Z)(o,2),r=h[0],x=h[1],P=function(){var p=(0,V.Z)((0,K.Z)().mark(function v(){var C,A;return(0,K.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(g){B.next=2;break}return B.abrupt("return");case 2:return B.prev=2,B.next=5,(0,b.GK)(g,t);case 5:C=B.sent,A=(0,b.O0)(C.balances,"asset"),k.Z.close("updateSpotBalance"),x(A),l(A.BTC.free),B.next=17;break;case 12:B.prev=12,B.t0=B.catch(2),k.Z.warning({message:"\u73B0\u8D27\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateSpotBalance",description:JSON.stringify(B.t0.data),placement:"bottomRight",duration:15}),console.log(B.t0.data),x({});case 17:case"end":return B.stop()}},v,null,[[2,12]])}));return function(){return p.apply(this,arguments)}}();return(0,Z.useEffect)(function(){P();var p=setInterval(P,f*1e3);return function(){clearInterval(p)}},[g,t]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.ZP,{ghost:!0,children:(0,e.jsx)(X,{accounts:s,updateKey:m,type:"spot"})}),(!r||!r.USDT)&&(0,e.jsx)(M.Z,{active:!0}),r&&r.USDT&&(0,e.jsxs)(R.ZP,{wrap:!0,ghost:!0,children:[(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:r.USDT.free,title:"USDT.free:"}}),(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:r.BTC.free,title:"BTC.free:"}})]})]})},se=function(n){var u=n.setFutureKey,s=n.accounts,f=n.refreshInterval,t=n.env;if(!s)return(0,e.jsx)(e.Fragment,{});var F=(0,Z.useState)(0),y=(0,E.Z)(F,2),g=y[0],T=y[1],c=(0,Z.useState)(null),d=(0,E.Z)(c,2),S=d[0],l=d[1];function m(C){u(C),l(C)}var o=(0,Z.useState)({}),h=(0,E.Z)(o,2),r=h[0],x=h[1],P=function(){var C=(0,V.Z)((0,K.Z)().mark(function A(){var U,B,z;return(0,K.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(S){D.next=2;break}return D.abrupt("return");case 2:return D.prev=2,D.next=5,(0,b.OG)(S,t);case 5:U=D.sent,B=(0,b.oN)(U),z=(0,b.TY)(U),x(U),T(Number(z)),k.Z.close("updateFutureBalance"),D.next=18;break;case 13:D.prev=13,D.t0=D.catch(2),k.Z.warning({message:"\u5408\u7EA6\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateFutureBalance",description:JSON.stringify(D.t0.data),placement:"bottomRight",duration:15}),console.log(D.t0),x({});case 18:case"end":return D.stop()}},A,null,[[2,13]])}));return function(){return C.apply(this,arguments)}}();(0,Z.useEffect)(function(){P();var C=setInterval(P,f*1e3);return function(){clearInterval(C)}},[S,t]);var p=null,v=[];return r&&r.assets&&(p=(0,b.vN)(r),v=(0,b.pd)(r)),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.ZP,{ghost:!0,children:(0,e.jsx)(X,{accounts:s,updateKey:m,type:"future"})}),(!r||!p)&&(0,e.jsx)(M.Z,{active:!0}),r&&p&&(0,e.jsxs)(R.ZP,{wrap:!0,ghost:!0,children:[(0,e.jsxs)(I.Z.Group,{children:[(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:p.availableBalance,title:"\u53EF\u7528BTC:"}}),(0,e.jsx)(R.ZP.Divider,{}),(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:p.maintMargin,title:"\u7EF4\u6301\u4FDD\u8BC1\u91D1:"}})]}),(0,e.jsxs)(I.Z.Group,{children:[(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:p.marginBalance,title:"\u4FDD\u8BC1\u91D1\u4F59\u989D:"}}),(0,e.jsx)(R.ZP.Divider,{}),(0,e.jsx)(I.Z,{ghost:!0,statistic:{value:p.walletBalance,title:"\u94B1\u5305\u4F59\u989D:"}})]})]})]})},Ue=i(3515),ie=i(86288),le=i(48717),H=i(11238),O=I.Z.Statistic,oe=function(n){var u=n.env,s=(0,Z.useState)({actuals_price:0,futures_price:0,futures_next_price:0,left_days:10,left_next_days:10,quarter:"BTCUSD_",nextQuarter:"BTCUSD"}),f=(0,E.Z)(s,2),t=f[0],F=f[1],y=function(){var l=(0,b.Gm)(),m=H.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["SPOT"+u]+"/api/v3/ticker/price?symbol=BTCUSDT"),o=H.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+u]+"/dapi/v1/ticker/price?symbol=BTCUSD_".concat(l.quarter[0])),h=H.ZP.get({SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+u]+"/dapi/v1/ticker/price?symbol=BTCUSD_".concat(l.nextQuarter[0]));Promise.all([m,o,h]).then(function(r){var x=(0,E.Z)(r,3),P=x[0],p=x[1],v=x[2],C={actuals_price:P.price,futures_price:p[0].price,futures_next_price:v[0].price,left_days:l.quarter[1],left_next_days:l.nextQuarter[1],quarter:"BTCUSD_"+l.quarter[0],nextQuarter:"BTCUSD_"+l.nextQuarter[0]};F(C)})},g=(0,Z.useState)(!1),T=(0,E.Z)(g,2),c=T[0],d=T[1];return(0,Z.useEffect)(function(){var S=setInterval(function(){y()},1e3);return function(){return clearInterval(S)}},[u]),(0,e.jsx)(le.Z,{onResize:function(l){d(l.width<692)},children:(0,e.jsx)(ie.Z,{offsetTop:45,children:(0,e.jsxs)(I.Z.Group,{direction:c?"column":"row",span:24,children:[(0,e.jsx)(I.Z,{title:"\u73B0\u8D27\u4EF7\u683C",statistic:{value:(+t.actuals_price).toFixed(2),suffix:"USDT",valueStyle:{fontWeight:"bold"}}}),(0,e.jsx)(I.Z,{title:"\u5F53\u5B63: "+t.quarter,statistic:{value:((t.futures_price-t.actuals_price)*100*365/(t.actuals_price*t.left_days)).toFixed(2),prefix:(0,e.jsx)("span",{style:{fontSize:16},children:"\u5E74\u5316"}),valueStyle:{fontWeight:"bold"},suffix:"%"},extra:(0,e.jsx)(O,{value:t.left_days,title:"\u5269\u4F59\u5929\u6570: ",layout:"horizontal"}),footer:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(O,{value:(+t.futures_price).toFixed(2),suffix:"USDT",title:"\u671F\u8D27\u4EF7\u683C",layout:"horizontal"}),(0,e.jsx)(O,{value:((t.futures_price-t.actuals_price)*100/t.actuals_price).toFixed(2),suffix:"%",title:"margin",layout:"horizontal"})]})}),(0,e.jsx)(I.Z,{title:"\u6B21\u5B63: "+t.nextQuarter,statistic:{value:((t.futures_next_price-t.actuals_price)*100*365/(t.actuals_price*t.left_next_days)).toFixed(2),prefix:(0,e.jsx)("span",{style:{fontSize:16},children:"\u5E74\u5316"}),valueStyle:{fontWeight:"bold"},suffix:"%"},extra:(0,e.jsx)(O,{value:t.left_next_days,title:"\u5269\u4F59\u5929\u6570: ",layout:"horizontal"}),footer:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(O,{value:(+t.futures_next_price).toFixed(2),suffix:"USDT",title:"\u671F\u8D27\u4EF7\u683C",layout:"horizontal"}),(0,e.jsx)(O,{value:((t.futures_next_price-t.actuals_price)*100/t.actuals_price).toFixed(2),suffix:"%",title:"margin",layout:"horizontal"})]})})]})})},"resize-observer")},Re=i(57663),$=i(71577),ce=i(17253),de=i(60014),fe=i(86615),pe=function(n){var u=n.accounts,s=n.spotUrl,f=n.spotKey,t=n.futureKey,F=(0,Z.useRef)(),y=(0,Z.useState)(!1),g=(0,E.Z)(y,2),T=g[0],c=g[1],d=function(l){var m,o;(m=F.current)===null||m===void 0||(o=m.validateFieldsReturnFormatValue)===null||o===void 0||o.call(m).then(function(h){c(!0);var r=h.quantity,x=h.asset,P=l=="fromSpot"?f:t,p=(0,b.re)(s,"https://m1-coin.littlebrother.icu",l,x,r,P);p.then(function(){k.Z.info({message:"\u4ECE "+(l=="fromSpot"?"\u73B0\u8D27":"\u5408\u7EA6")+" \u8F6C\u51FA\u6210\u529F",description:"",placement:"bottomRight",duration:15})}).catch(function(v){k.Z.warning({message:"\u4ECE "+(l=="fromSpot"?"\u73B0\u8D27":"\u5408\u7EA6")+" \u8F6C\u51FA\u5931\u8D25",description:JSON.stringify(v.data),placement:"bottomRight",duration:30})})})};return u?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ce.A,{grid:!0,formRef:F,rowProps:{gutter:[16,16]},layout:"horizontal",submitter:!1,initialValues:{asset:"BTC"},children:[(0,e.jsx)(fe.Z.Group,{name:"asset",radioType:"button",options:["BTC","USDT"]}),(0,e.jsx)("br",{}),(0,e.jsx)(de.Z,{name:"quantity",required:!0,rules:[{required:!0,message:"\u8F93\u5165\u6570\u5B57"}]}),(0,e.jsx)($.Z,{type:"primary",onClick:function(){d("fromSpot")},children:">>\u73B0\u8D27\u8F6C\u5408\u7EA6>>"}),(0,e.jsx)($.Z,{type:"primary",onClick:function(){d("fromFuture")},children:"<<\u5408\u7EA6\u8F6C\u73B0\u8D27<<"})]})}):(0,e.jsx)(e.Fragment,{})},Ie=i(71194),ve=i(50146),me=i(57119),he=i(16894),ye=function(n){var u=n.balances,s=n.futureKey,f=n.futureUrl;if(!u)return(0,e.jsx)(e.Fragment,{});var t=ve.Z.confirm,F=function(){t({title:"\u6CE8\u610F\uFF0C\u5207\u52FF\u91CD\u590D\u4E0B\u5355",icon:(0,e.jsx)(me.Z,{}),content:"\u4E00\u952E\u5E73\u4ED3\u5DF2\u4F7F\u7528\u5E02\u4EF7\u4E0B\u5355\uFF0C\u5207\u52FF\u91CD\u590D\u70B9\u51FB\uFF0C\u9632\u6B62\u91CD\u590D\u4E0B\u5355"})},y=function(d){var S=-1*d.positionAmt,l=(0,b.Dh)(f,"https://m1-coin.littlebrother.icu",d.symbol,S,s,!1);l.then(function(m){F(),k.Z.info({message:"\u4E00\u952E\u5E73\u4ED3\u5DF2\u4E0B\u5355",description:"",placement:"bottomRight",duration:15})}).catch(function(m){k.Z.warning({message:"\u4E00\u952E\u5E73\u4ED3\u4E0B\u5355\u5931\u8D25",description:JSON.stringify(m.data),placement:"bottomRight",duration:15})})},g=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5408\u7EA6",dataIndex:"symbol",copyable:!0},{title:"x",dataIndex:"leverage"},{title:"\u6570\u91CF",dataIndex:"positionAmt"},{title:"\u4FDD\u8BC1\u91D1\u5360\u7528",dataIndex:"notionalValue"},{title:"\u6301\u4ED3\u6210\u672C",dataIndex:"entryPrice"},{title:"\u7EF4\u6301\u4FDD\u8BC1\u91D1",dataIndex:"maintMargin"},{title:"\u672A\u5B9E\u73B0\u76C8\u4E8F",dataIndex:"unrealizedProfit"},{title:"\u6700\u5927\u53EF\u5F00\u4ED3\u6570",dataIndex:"maxQty"},{title:"\u4E00\u952E\u5E73\u4ED3",valueType:"option",key:"option",render:function(d,S,l,m){return[(0,e.jsx)($.Z,{type:"link",onClick:function(){y(S)},children:"\u5E02\u4EF7"},"closePosition")]}}],T=[];return u&&u.assets&&(T=(0,b.pd)(u)),(0,e.jsx)(R.ZP,{span:{xs:24,l:12},collapsible:!0,title:"\u5408\u7EA6\u6301\u4ED3\u660E\u7EC6",defaultCollapsed:!0,children:u&&(0,e.jsx)(he.ZP,{columns:g,dataSource:T,rowKey:"symbol",search:!1,options:{setting:{listsHeight:400}},dateFormatter:"string"})})},ge=function(n){var u=n.spotKey,s=n.futureKey,f=n.env,t=n.refreshInterval,F=(0,Z.useState)({}),y=(0,E.Z)(F,2),g=y[0],T=y[1],c=(0,Z.useState)(0),d=(0,E.Z)(c,2),S=d[0],l=d[1],m=function(){var o=(0,V.Z)((0,K.Z)().mark(function h(){var r,x,P;return(0,K.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s){v.next=2;break}return v.abrupt("return");case 2:return v.prev=2,v.next=5,(0,b.OG)(s,f);case 5:r=v.sent,x=(0,b.oN)(r),P=(0,b.TY)(r),T(r),l(Number(P)),k.Z.close("updateFutureBalance"),v.next=18;break;case 13:v.prev=13,v.t0=v.catch(2),k.Z.warning({message:"\u5408\u7EA6\u8D26\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",key:"updateFutureBalance",description:JSON.stringify(v.t0.data),placement:"bottomRight",duration:15}),console.log(v.t0),T({});case 18:case"end":return v.stop()}},h,null,[[2,13]])}));return function(){return o.apply(this,arguments)}}();return(0,Z.useEffect)(function(){m();var o=setInterval(m,t*1e3);return function(){clearInterval(o)}},[s,f]),s?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(R.ZP,{ghost:!0,style:{marginBottom:20},children:(0,e.jsx)(ye,{balances:g,futureUrl:{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["FUTURE"+f],futureKey:s})})}):(0,e.jsx)(e.Fragment,{})},Se=i(56037),Fe=function(n){var u=n.update,s=n.submit,f=n.cancel,t=n.isRunning,F=(0,Z.useRef)(),y=(0,b.Gm)(),g=[{title:"\u5408\u7EA6",dataIndex:"symbolKey",valueType:"select",readonly:t,valueEnum:function(){var c=new Map;return c.set("quarter",{text:"BTCUSD_".concat(y.quarter[0])}),c.set("nextQuarter",{text:"BTCUSD_".concat(y.nextQuarter[0])}),c},colProps:{xs:24,md:8},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5408\u7EA6\u540D\u79F0",dataIndex:"symbol",valueType:"text",readonly:!0,dependencies:["symbolKey"],fieldProps:function(c){var d=c.getFieldValue("symbolKey");return d&&c.setFieldValue("symbol","BTCUSD_".concat(y[d][0])),{}}},{title:"\u5408\u7EA6\u5269\u4F59\u5929\u6570",dataIndex:"leftDayNum",valueType:"digit",readonly:!0,dependencies:["symbolKey"],fieldProps:function(c){var d=c.getFieldValue("symbolKey");return d&&c.setFieldValue("leftDayNum",y[d][1]),{}}},{title:"\u6570\u91CF",dataIndex:"contAmount",valueType:"digit",initialValue:100,readonly:t,fieldProps:{min:1,step:1,precision:0,addonAfter:"Cont"}},{title:"margin\u4E0B\u9650",tooltip:"\u5E74\u5316\u6536\u76CA\uFF0C\u672A\u8BA1\u7B97\u624B\u7EED\u8D39\uFF0C\u5F53margin\u5C0F\u4E8E\u6B64\u503C\u65F6\u7B49\u5F85",dataIndex:"hr",valueType:"digit",initialValue:15,fieldProps:{min:5,max:100,step:.01,precision:2,addonAfter:"%"},transform:function(c){return+(c/100).toFixed(4)}},{title:"\u7B49\u5F85\u95F4\u9694",dataIndex:"waitTime",valueType:"digit",initialValue:5,fieldProps:{min:1,step:1,precision:0,addonAfter:"s"}},{title:"\u6BCF\u6B21\u5408\u7EA6\u8D2D\u4E70\u5F20\u6570",tooltip:"1Cont=100USD",dataIndex:"contNum",valueType:"digit",initialValue:1,fieldProps:{min:1,step:1,precision:0,addonAfter:"Cont"}},{title:"epoch",dataIndex:"epoch",valueType:"digit",readonly:!0,dependencies:["contAmount","contNum"],fieldProps:function(c){var d=c.getFieldValue("contAmount"),S=c.getFieldValue("contNum");return c.setFieldValue("epoch",d/S),{precision:0}}},{title:"\u5355\u5F20\u5408\u7EA6\u4EF7\u503C($)",dataIndex:"contPreValue",valueType:"digit",readonly:!0,initialValue:100,fieldProps:{min:1,step:1,precision:2,addonAfter:"$"}},{title:"=====\u6682\u65F6\u4E0D\u7528\u7684\u914D\u7F6E=====",valueType:"group",colProps:{xs:24},columns:[{title:"\u73B0\u8D27\u624B\u7EED\u8D39\u7387",dataIndex:"feeRatio",valueType:"digit",initialValue:.1,fieldProps:{max:.1,step:.01,precision:4,addonAfter:"%",disabled:!0}},{title:"\u5408\u7EA6\u624B\u7EED\u8D39\u7387",dataIndex:"futureFeeRatio",valueType:"digit",initialValue:.02,fieldProps:{max:.02,step:.002,precision:4,addonAfter:"%",disabled:!0}},{title:"USD<->USDT",tooltip:"1\u7F8E\u91D1\u53EF\u4EE5\u5151\u6362\u7684USDT\u6570\u91CF",dataIndex:"usdtRatio",valueType:"digit",initialValue:1.0002,fieldProps:{min:.999,max:1.001,step:1e-4,precision:4,disabled:!0}}]}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Se.Z,{size:"small",colProps:{span:8},rowProps:{gutter:32},grid:!0,shouldUpdate:!1,layoutType:"Form",formRef:F,submitter:{render:function(c,d){return[(0,e.jsx)($.Z,{htmlType:"button",hidden:t,onClick:function(){var l,m;(l=F.current)===null||l===void 0||(m=l.validateFieldsReturnFormatValue)===null||m===void 0||m.call(l).then(function(o){s(o)})},type:"primary",children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)($.Z,{htmlType:"button",hidden:!t,onClick:function(){var l,m;(l=F.current)===null||l===void 0||(m=l.validateFieldsReturnFormatValue)===null||m===void 0||m.call(l).then(function(o){u(o)})},children:"\u52A8\u6001\u66F4\u65B0"},"update"),(0,e.jsx)($.Z,{htmlType:"button",hidden:!t,onClick:function(){f()},danger:!0,children:"\u7EC8\u6B62"},"cancel")]}},columns:g})})},j=function(){for(var u=arguments.length,s=new Array(u),f=0;f<u;f++)s[f]=arguments[f];console.log(s)},Q=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";j("=".repeat(20)+u+"=".repeat(20))},Te=function(n){var u=n.spotKey,s=n.futureKey;if(!u||!s)return(0,e.jsx)(e.Fragment,{});var f=(0,Z.useState)(!1),t=(0,E.Z)(f,2),F=t[0],y=t[1],g=(0,Z.useRef)(!0);console.log("init");var T=0;function c(o,h){return d.apply(this,arguments)}function d(){return d=(0,V.Z)((0,K.Z)().mark(function o(h,r){var x;return(0,K.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return x=Promise.all([(0,b.$X)(),(0,b.BU)(h)]).then(function(v){var C=(0,E.Z)(v,2),A=C[0],U=C[1];return T=Number(A),S(A,U,r)}),p.abrupt("return",x);case 2:case"end":return p.stop()}},o)})),d.apply(this,arguments)}function S(o,h,r){var x=(h-o)/o*365*100/r;return j("margin:",x.toFixed(2)+"%"),Number.isFinite(x)?x:0}function l(o,h){var r=!0;return o<h&&(r=!1),r}var m=function(){var o=(0,V.Z)((0,K.Z)().mark(function h(r){var x,P,p,v,C,A,U,B,z,w,D,Ze,G,q,J,W,je,_;return(0,K.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return G=function(){j("stop"),y(!1),g.current=!0},g.current=!1,y(!0),Q(),j("symbol",r.symbol),j("\u5F20\u6570\uFF0C1\u5F20=".concat(r.contPreValue,"usd"),r.contAmount),j("Hurdle rate",(r.hr*100).toFixed(2)+"%"),Q(),x=r.epoch,j("epoch",x),P=r.contNum*r.contPreValue,j("\u5269\u4F59\u5230\u671F\u5929\u6570",r.leftDayNum),p=1,v=0,C=5,a.next=17,c(r.symbol,r.leftDayNum);case 17:return A=a.sent,j("\u5F53\u524Dmargin",A),j("\u5F53\u524DbtcValue",T),U=0,a.next=23,(0,b.dP)(s);case 23:if(a.t0=a.sent,a.t1=T,a.t2=a.t0*a.t1,a.t3=C,!(a.t2<a.t3)){a.next=39;break}return a.next=30,(0,b.tW)(u,"BTC");case 30:if(a.t4=a.sent,a.t5=T,a.t6=a.t4*a.t5,a.t7=C,!(a.t6<a.t7)){a.next=36;break}U+=2;case 36:U+=1,a.next=40;break;case 39:U=0;case 40:j("bufferFlag 0\u4E0D\u9700\u8981\u989D\u5916\u64CD\u4F5C 1\uFF0C\u53EA\u9700\u8981\u989D\u5916\u8F6C\u8D26\uFF0C3,\u591A\u8D2D\u4E70\u5E76\u8F6C\u8D26",U),B=0,z=0,w=0,D=0,Ze=0;case 46:if(!(!g.current&&p<=x)){a.next=85;break}return Q(p),a.next=50,c(r.symbol);case 50:if(q=a.sent,J=P,!l(q,r.hr)){a.next=80;break}return p==1&&(U==2||U==3)&&(J+=C),j("\u9700\u8981\u8D2D\u4E70btc\u7684\u6570\u91CF\uFF0Cusdt\u8BA1\u4EF7",J),a.next=57,(0,b.Jh)(u,J.toFixed(2)).catch(function(N){G(),j("buy btc error:",N.data)});case 57:if(W=a.sent,!g.current){a.next=60;break}return a.abrupt("break",85);case 60:return j("continue!"),B+=Number(W.btc),z+=Number(W.usdt),v=W.btc,a.next=66,(0,b.Qc)(u,"SPOT",v).catch(function(N){G(),j("transfer btc error:",N.data)});case 66:if(je=a.sent,!g.current){a.next=69;break}return a.abrupt("break",85);case 69:return w+=Number(v),a.next=72,(0,b.ee)(s,r.symbol,r.contNum).catch(function(N){G(),j("future sell error:",N.data)});case 72:if(_=a.sent,!g.current){a.next=75;break}return a.abrupt("break",85);case 75:j("future sell res",_),D+=Number(r.contNum),p+=1,a.next=83;break;case 80:return j("\u7B49\u5F85"),a.next=83,new Promise(function(N){return setTimeout(N,r.waitTime)});case 83:a.next=46;break;case 85:Q("finished"),j("\u73B0\u8D27\u4E70\u5165BTC\u6570\u91CF",B),j("\u73B0\u8D27\u4E70\u5165BTC\u6570\u91CF\u82B1\u8D39USDT",z),j("\u5212\u8F6CBTC\u6570\u91CF",w),j("\u5F00\u5355\u6570",D),G();case 91:case"end":return a.stop()}},h)}));return function(r){return o.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Fe,{update:function(){y(!1)},submit:function(h){y(!0),m(h)},cancel:function(){y(!1)},isRunning:F}),F&&(0,e.jsx)("span",{children:"running"}),(0,e.jsx)("button",{onClick:function(){g.current=!0},children:"cancel"})]})},xe=function(){var n=(0,V.Z)((0,K.Z)().mark(function u(){return(0,K.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,L.WY)("https://m1-coin.littlebrother.icu/account/",{method:"GET",headers:{"Content-Type":"application/json"}}));case 1:case"end":return f.stop()}},u)}));return function(){return n.apply(this,arguments)}}(),be=function(){var n=(0,Z.useState)(""),u=(0,E.Z)(n,2),s=u[0],f=u[1],t=(0,L.QT)(xe),F=(0,Z.useState)(5),y=(0,E.Z)(F,2),g=y[0],T=y[1],c=(0,Z.useState)(null),d=(0,E.Z)(c,2),S=d[0],l=d[1],m=(0,Z.useState)(null),o=(0,E.Z)(m,2),h=o[0],r=o[1];return(0,e.jsxs)(re.Z,{children:[s=="_TEST"&&(0,e.jsx)(te.Z,{message:"\u6CE8\u610F\uFF1A\u5F53\u524D\u4E3A\u6D4B\u8BD5\u6A21\u5F0F\uFF0C\u8C03\u7528\u7684\u63A5\u53E3\u5747\u4E3A\u5E01\u5B89\u6D4B\u8BD5\u7F51\u7EDC\uFF0C\u6D4B\u8BD5\u73AF\u5883\u53EF\u80FD\u56E0\u4E3A\u4EF7\u683C\u5DEE\u8DDD\u8F83\u5927\u5BFC\u81F4\u4E0B\u5355\u5931\u8D25\uFF08PERCENT_PRICE filter limit\uFF09\u7B49\u5176\u4ED6\u5F02\u5E38\u73B0\u8C61",banner:!0}),(0,e.jsx)(R.ZP,{ghost:!0,style:{marginBottom:20},title:"\u73B0\u8D27\u671F\u8D27\u5BF9\u51B2\u5957\u5229(BTC)",extra:(0,e.jsx)(ee.Z,{defaultChecked:s!="_TEST",checkedChildren:"\u7EBF\u4E0A",unCheckedChildren:"\u6D4B\u8BD5",onChange:function(P){f(P?"":"_TEST")}}),children:(0,e.jsx)(oe,{env:s})}),t.loading==!1&&t.data&&(0,e.jsxs)(R.ZP,{wrap:!0,style:{marginBottom:20},bodyStyle:{padding:0},children:[(0,e.jsx)(R.ZP,{colSpan:10,children:(0,e.jsx)(ue,{setSpotKey:r,accounts:t.data,refreshInterval:g,env:s})}),(0,e.jsx)(R.ZP,{colSpan:4,children:(0,e.jsx)(pe,{accounts:t.data,spotKey:h,futureKey:S,spotUrl:{SPOT:"https://api.binance.com",SPOT_TEST:"https://testnet.binance.vision",FUTURE:"https://dapi.binance.com",FUTURE_TEST:"https://testnet.binancefuture.com"}["SPOT"+s]})}),(0,e.jsx)(R.ZP,{colSpan:10,children:(0,e.jsx)(se,{setFutureKey:l,accounts:t.data,refreshInterval:g,env:s})})]}),(0,e.jsx)(ge,{spotKey:h,futureKey:S,refreshInterval:g,env:s}),(0,e.jsx)(R.ZP,{style:{marginBottom:20},children:(0,e.jsx)(Te,{spotKey:h,futureKey:S})})]})}}}]);
